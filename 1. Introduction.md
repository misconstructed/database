#### 1장

## Introduction

- 데이터베이스(Database) : 데이터들의 모임
  - DBMS(데이터베이스 관리 시스템) : 데이터베이스에 정보를 저장하고, 검색하기 위한 환경을 제공

### 데이터베이스 시스템의 목적

- 파일 처리 시스템(file-processing system) : 통상 운영체제에 의해 지원됨

  - 영속적 레코드가 여러 가지 서로 다른 파일들에 저장되는 경우가 발생함

  - 파일 처리 시스템에 데이터를 저장하는 경우 발생하는 단점

    1. 데이터 중복과 비일관성 : 파일들이 서로 다른 형식을 갖게 됨
       - 데이터의 비일관성(inconsistency) : 동일한 데이터의 여러 사본이 서로 다른 값을 보유하는 상태
    2. 데이터 엑세스 시의 난점 : 데이터를 편리하고 효율적으로 검색하기 힘들다
    3. 데이터 고립 : 데이터가 여러 파일에 흩어져 있고, 파일 형식이 서로 다르다
    4. 무결성(integrity) 문제 : 데이터베이스 내에 저장된 값들은 어떤 형식의 일관성 제약 조건들(consistency constraint)을 만족해야 함
    5. 원자성 문제 : 시스템이 고장을 일으켰을 때 데이터를 고장 전의 일관성 있는 상태로 유지시켜야 함.
       - 원자적(atomic) : 일련의 과정 전체가 수행되든지 아니면 어느 것도 수행되지 않아야 함
    6. 동시 엑세스 문제 : 여러 사용자가 데이터를 동시에 갱신할 수 있어야 하는데, 이 과정에서 데이터의 비일관성이 발생할 수 있음
    7. 보안 문제 : 모든 사용자가 모든 데이터를 접근할 수 있는 것은 아니다.

    - 파일 처리 시스템에서의 문제점들을 해결하기 위해 데이터베이스 시스템이 개발됨

  ### 데이터의 관점

  #### 데이터의 추상화

  - 사용자에게 데이터에 대한 추상적인 관점을 제공함
    - 데이터가 어떻게 저장되고 유지되는지에 대한 정보를 사용자로부터 은페한다.
  - 데이터의 추상화
    1. 물리적 단계(physical level) : 어떻게(how) 저장되는지 기술
    2. 논리적 단계(logical level) : 어떤(what) 데이터가 저장되는지, 데이터들 사이에 어떤 관계가 있는지
       - 물리적 데이터 독립성(ㅔhysical data independence) : 응용 프로그램이 물리적 스키마에 의존하지 않기 때문에 물리적 스키마가 변경되어도 응용 프로그램을 고칠 필요가 없는 것.
    3. 뷰 단계(view level)  : 전체 데이터베이스의 일부분만 기술

  - 인스턴스(Instance) : 특정한 순간에 데이터베이스에 저장되어 있는 정보의 모임
    - 변수에 저장된 값
  - 스키마(schema) : 데이터베이스의 전체적인 설계
    - 프로그램에서 변수 선언에 대응
  - 데이터 모델
    1. 관계형 모델(relational model) : 데이터와 데이터 사이의 관계를 나타내기 위한 테이블들의 모임
       - 테이블 = relation
         - 각 테이블은 특정한 형의 레코드들을 포함함
       - 레코드 기반 모델의 한 예
    2. 개체-관게 모델(entity-relationship model) : 객체들의 집합입 개체(entity)들과 이러한 개체들의 관계(relationship)를 이용
    3. 객체-기반 데이터 모델(object-based data model)
    4. 반구조형 데이터 모델(semistructured data model)

#### 데이터베이스 언어

1. 데이터 조작 언어(DML, data manipulation language) : 데이터를 접근하거나 조작할 수 있도록 하는 언어

   - 정보를 검색, 삽입, 삭제, 수정
   - 절차식(procedural) DML : 데이터를 어떻게 구할지 지정할 것을 요구하는 방식
   - 선언적(declartive) DML : 어떠한 데이터가 필요한지 지정할 것만을 요구하는 방식(인터넷 검색)
     - 시스템이 스스로 데이터에 효율적으로 엑세스하는 방법을 찾아야 함
   - 질의(query) : 검색을 요청하는 문장
     - SQL언어는 비절차적 언어임

2. 데이터 정의 언어(DDL, data definition language) : 데이터베이스 시스템에 의해 사용되는 저장구조와 엑세스 방법 등을 정의

   - 사용자에게는 보이지 않는 데이터베이스의 스키마의 세무 사항을 정의함

   - 일관성 제약조건을 만족애햐 함

     - 데이터베이스 시스템을 데이터베이스가 갱신될 때마다 이러한 제약조건을 검사함

     1. 도메인 제약조건(domain constraints) : 가능한 값들의 도메인은 모든 속성들과 연관되어 있어야 함
        - 가장 기본적인 형태의 무결정 제약조건
     2. 참조 무결성(referential integrity) : 다른 테이블의 값을 참조하는 경우, 참조하는 값을 다른 테이블에 존재해야 함.
        - 참조 무결성이 위반되었을 때 가장 기본적인 절차는 위반을 유발시킨 동작을 거부함
     3. 주장(assertion) : 주장이 생성되었을 때 시스템은 해당 주장이 타당한지 검증함
        - 만약 주장이 타당하다면 데이터베이스에 대한 수정은 주장을 위반하지 않은 경우에만 허용됨
     4. 권한(authorization) 
        1. 읽기 권한 : 읽기만 허용, 데이터 수정은 금지
        2. 삽입 권한 : 새로운 데이터 삽입은 허용, 데이터 수정 금지
        3. 갱신 권한 : 데이터 수정은 허용, 데이터 삭제는 금지
        4. 삭제 권한 : 데이터 삭제 허용

   - DDL의 결과는 메타데이터(metadata) = 데이터 사전(data dictionary)에 위치함

## 관계형 데이터베이스

- 관계형 모델에 기반하여 데이터와 데이터들의 관계를 나타내기 위해 테이블들의 집합 사용

#### 테이블 

- 고유한 이름을 가진 여러 개의 열(column)으로 구성됨
- 데이터베이스는 몇 개의 형으로 이루어진 고정 형식의 레코드로 구성됨
- 레코드 안에서 각각의 속성을 특정 문자로 구분, 각각의 레코드는 또 다른 특정 문자로 구분되어 저장됨

#### 개제-관계 모델 (E-R 모델)

- 객체를 나타내는 개체(entity)들과 개체들 간의 관계(relationship)를 이용함
  - 개체 집합(entity set)과 관계 집합(relationship set)으로 구성
- 개체는 데이터베이스에서 속성(attribute)의 집합으로 기술됨
  - 유일하게 구별하기 위해 고유의 식별자를 부여
- 관계(relationship)란 여러 개체들 간의 연관성을 말함
- 개체-관계 다이어그램(E-R diagram)으로 데이터베이스의 전체 논리적 구조를 시각적으로 표현
  - 통일도니 모델링 언어(UML) 사용
  - 개체 집합은 윗부분에 개체 집합의 이름을 갖고 그 아래에 속성들의 목록을 갖는 사각형 박스로 표현
  - 관계 집합을 연관된 개체 집합들을 쌍으로 연결한 마름모로 표현됨
    - 대응 수(mapping cardinality) : 어떤 개체가 하나의 관계 집합을 매개로 관련될 수 있는 개체의 수

#### 정규화

- 불필요하게 중복 저장되는 정보가 없고, 정보 검색을 쉽게 할 수 있는 릴레이션 스키마 집합을 생성함.
- 적당한 정규형(normal form)에 맞게 스키마를 설계
- 잘못된 설계로 인해 정보의 중복, 특정 정보의 표현이 불가능한 문제가 발생할 수 있음
- 널(null) : 존재하지 않는(알려지지 않은) 값을 나타냄
  - Missing : 값은 존재하지만 정보를 가지고 있지 않음
  - not known : 값이 실제로 존재하는지 여부를 알지 못함
  - 널 값에 의지하지 않는 것이 바람직함

#### 데이터 저장과 질의

- 데이터베이스 시스템 = 저장장치 관리자 + 질의 처리기
- 데이터베이스는 대용량 기억 공간을 필요로 함
  - 데이터는 필요할 때마다 디스크 저장 장치와 메인 메모리 사이에서 이동
  - 데이터베이스 시스템을 메인 메모리와 디스크 사이의 데이터 이동이 최소화되도록 데이터를 구조화
    - 질의 처리기 : 접근하는 과정을 단순화하고 효율적으로 만드는 역할

1. 저장장치 관리자
   - 파일 관리자(file manager)와 상호 작용하는 책무
   - 다양한 DML문을 하위 단계의 파일 시스템 명령으로 변환
   - 데이터베이스 내의 데이터를 저장, 검색, 갱신하는 역할
   - 구성 요소
     1. 권한과 무결성에 관한 관리
     2. 트랜젝션 관리 : 일관성 있는 정확한 상태를 유지하도록 보장, 동시에 실행되는 트랜젝션들이 충돌없이 잘 실행될 수 있도록 
     3. 파일 관리자 
     4. 버퍼 관리자 : 데이터를 인출하는 과정, 메인 메모리에서 캐시로 보낼 데이터를 결정
     5. 데이터 파일 : 데이터베이스 자체를 저장
     6. 데이터 사전 : 메타 데이터를 저장(데이터베이스의 스키마 저장)
     7. 색인 저장
2. 질의 처리기 
   - 구성
     1. DDL 인터프리터 : DDL문을 해독해서 데이터 사전 내에 기록
     2. DML 컴파일러 : DML문을 질의 평가 엔진이 이해할 수 있는 하위 단계 명령어로 구성된 질의 수행 계획으로 바꿈
        - 질의 최적화(query optimization)을 수행 : 여러 질의 수행 계획 중 가장 낮은 비용의 계획을 선택
     3. 질의 평가 엔진 : DML 컴파일러가 생성한 하위 단계 명령을 실행

#### 트랜젝션 관리

- 원자성(atomicity) : all or nothing

- 일관성(consistency)

- 지속성(durability) : 영속성의 요구 조건

- 트랜젝션 : 응용 프로그램에서 하나의 논리적 기능을 수행하는 연산들의 모임

  - 어떤 데이터베이스 일관성 제약조건도 위반해서는 안됨

- 트랜젝션 관리자 = 동시성 제어 관리자 + 복구 관리자

  1. 복구 관리자(recovery manager) : 원자성과 지속성을 보장

     - 실패한 트랜젝션은 데이터베이스의 상태에 아무런 영향을 주지 말아야 함

     - 실패 복구(failure recovery)를 수행해야 함

  2. 동시성 제어 관리자(concurrency-control manager) : 동시 실행 트랜젝션들 간의 상호 작용을 제어

#### 데이터베이스 사용자

1. 일반 사용자 : 시스템에 익숙하지 않은 사용자
2. 응용 프로그래머
3. 능숙한 사용자 : 시스템에 직접 엑세스
4. 특수 아용자

- 데이터베이스 관리자(DBA) : 중앙에서 데이터베이스를 제어하는 사람
  1. 스키마 정의 : DDL로 작성된 일련의 정의를 실행, 스키마 생성
  2. 저장 구조와 엑세스 방법의 정의
  3. 스키마 및 물리 구조의 수정
  4. 데이터 엑세스 권한의 인정 : 서로 다른 형태의 권한을 규정
  5. 루틴 유지 및 관리
     - 주기적인 백업
     - 연산이 가능하도록 충분한 디스크 공간을 보장
     - 데이터베이스에서 수행되는 작업을 모니터링, 성능 저하 방지

